import{_ as B,b as u,G as p,I as x,H as C,f as l,e as t,g as s,m as T,r as k,X as H,o as K,c as m,x as P,y as X,a8 as O,u as L,q as o,B as f,J as q,p as W,V as Y,K as Z,C as _,a9 as h,z,j as c,L as ee}from"./index-TexIIK_8.js";import{u as te}from"./quickShareStore-DAg6hWQ2.js";import{V as I,a as b,b as g,d as le}from"./VList-74BXSDpy.js";import{V as ae}from"./VSpacer-CEFGUlLq.js";import{V as oe}from"./VDialog-RfSF4Tuc.js";import{V as se}from"./VMenu-B2YbBVxG.js";import{V as N}from"./VChip-Bkw_wO1V.js";import"./ssrBoot-CLhRb1dG.js";import"./dialog-transition-D7ZCLFfu.js";const ne={},ie={class:"skeleton-container"},re={class:"d-flex pa-4"},ue={class:"flex-grow-1"},de={class:"d-flex justify-space-between align-center"},me={class:"d-flex align-center"};function fe(A,i){return u(),p("div",ie,[(u(),p(x,null,C(4,d=>l(T,{key:d,class:"mb-4 skeleton-card",flat:""},{default:t(()=>[s("div",re,[i[3]||(i[3]=s("div",{class:"skeleton-avatar mr-4"},null,-1)),s("div",ue,[i[2]||(i[2]=s("div",{class:"d-flex align-center mb-3"},[s("div",{class:"skeleton-title"}),s("div",{class:"skeleton-chip ml-2"})],-1)),s("div",de,[i[1]||(i[1]=s("div",{class:"skeleton-subtitle"},null,-1)),s("div",me,[(u(),p(x,null,C(3,v=>s("div",{class:"skeleton-member-avatar",key:v})),64)),i[0]||(i[0]=s("div",{class:"skeleton-more-chip"},null,-1))])])]),i[4]||(i[4]=s("div",{class:"skeleton-action ml-2"},null,-1))])]),_:2},1024)),64))])}const ce=B(ne,[["render",fe],["__scopeId","data-v-48008415"]]),pe={class:"text-caption"},ve={class:"d-flex align-center justify-space-between"},ke={class:"text-primary"},be={class:"member-avatars d-flex align-center"},ge={key:0,class:"text-center pa-8"},ye={__name:"index",setup(A){const i=X(),d=k(!1),v=k(null),y=k(!1),V=te(),S=k(!1),w=k([{id:1,title:"Dinner",amount:1200,date:"2024-03-20",members:["John","Alice","Bob","Carol"]},{id:2,title:"Movie Night",amount:800,date:"2024-03-19",members:["John","Carol","David"]}]),D=H(()=>V.getQuickShare??[]),Q=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),U=n=>{i.push(`/quickshare/${n.id}/edit`)},j=async n=>{const e=`Quick Share: ${n.title}
Amount: ₹${n.amount}
Members: ${n.members.join(", ")}`;try{navigator.share?await navigator.share({text:e}):(await navigator.clipboard.writeText(e),y.value=!0)}catch($){console.error("Share failed:",$)}},M=async n=>{try{const e=`${window.location.origin}/share/${n.id}`;await navigator.clipboard.writeText(e),y.value=!0}catch(e){console.error("Copy failed:",e)}},J=n=>{v.value=n,d.value=!0},E=()=>{w.value=w.value.filter(n=>n.id!==v.value.id),d.value=!1,v.value=null},R=n=>`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=random`,F=()=>{i.push({name:"NewQuickShare",query:{type:"new"}})};return K(()=>{S.value=!0,V.fetchQuickShare().then(()=>{S.value=!1})}),(n,e)=>{const $=O("v-if");return u(),m(P,{class:"pa-0"},{default:t(()=>[!L(V).quickShares&&S.value?(u(),m($,{key:0},{default:t(()=>[l(ce)]),_:1})):(u(),m(I,{key:1,class:"mb-16"},{default:t(()=>[(u(!0),p(x,null,C(D.value,a=>(u(),m(b,{key:a.id,class:"mb-2",onClick:r=>L(i).push(`/quickshare/detail/${a.id}`)},{prepend:t(()=>[l(z,{color:"primary",size:"40"},{default:t(()=>[s("span",pe,c(a.title[0].toUpperCase()),1)]),_:2},1024)]),append:t(()=>[l(se,null,{activator:t(({props:r})=>[l(_,ee({icon:"mdi-dots-vertical",variant:"text",ref_for:!0},r),null,16)]),default:t(()=>[l(I,null,{default:t(()=>[l(b,{onClick:r=>U(a)},{prepend:t(()=>[l(f,null,{default:t(()=>e[4]||(e[4]=[o("mdi-pencil")])),_:1})]),default:t(()=>[l(g,null,{default:t(()=>e[5]||(e[5]=[o("Edit")])),_:1})]),_:2},1032,["onClick"]),l(b,{onClick:r=>j(a)},{prepend:t(()=>[l(f,null,{default:t(()=>e[6]||(e[6]=[o("mdi-share")])),_:1})]),default:t(()=>[l(g,null,{default:t(()=>e[7]||(e[7]=[o("Share")])),_:1})]),_:2},1032,["onClick"]),l(b,{onClick:r=>M(a)},{prepend:t(()=>[l(f,null,{default:t(()=>e[8]||(e[8]=[o("mdi-content-copy")])),_:1})]),default:t(()=>[l(g,null,{default:t(()=>e[9]||(e[9]=[o("Copy Link")])),_:1})]),_:2},1032,["onClick"]),l(b,{onClick:r=>J(a),color:"error"},{prepend:t(()=>[l(f,{color:"error"},{default:t(()=>e[10]||(e[10]=[o("mdi-delete")])),_:1})]),default:t(()=>[l(g,null,{default:t(()=>e[11]||(e[11]=[o("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),default:t(()=>[l(g,{class:"d-flex align-center mb-1"},{default:t(()=>[o(c(a.title)+" ",1),l(N,{size:"small",color:"primary",variant:"outlined",class:"ml-2"},{default:t(()=>{var r;return[l(f,{start:"",size:"16"},{default:t(()=>e[3]||(e[3]=[o("mdi-account-group")])),_:1}),o(" "+c((r=a==null?void 0:a.bill_members)==null?void 0:r.length)+" people ",1)]}),_:2},1024)]),_:2},1024),l(le,null,{default:t(()=>[s("div",ve,[s("div",ke,"₹"+c(a.total_amount)+" • "+c(Q(a.created_at)),1),s("div",be,[(u(!0),p(x,null,C(a.bill_members.slice(0,3),(r,G)=>(u(),m(z,{key:G,image:R(r.name),size:"24",class:"member-avatar"},null,8,["image"]))),128)),a.bill_members.length>3?(u(),m(N,{key:0,size:"x-small",color:"grey",class:"ml-1"},{default:t(()=>{var r;return[o(" +"+c(((r=a==null?void 0:a.bill_members)==null?void 0:r.length)-3),1)]}),_:2},1024)):q("",!0)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128)),D.value.length?q("",!0):(u(),p("div",ge,[l(f,{size:"64",color:"grey-lighten-2"},{default:t(()=>e[12]||(e[12]=[o("mdi-share-variant-outline")])),_:1}),e[13]||(e[13]=s("div",{class:"text-h6 text-medium-emphasis mt-2"},"No Quick Shares",-1)),e[14]||(e[14]=s("div",{class:"text-body-2 text-medium-emphasis mb-4"},"Create your first quick share",-1))]))]),_:1})),l(oe,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a),"max-width":"400"},{default:t(()=>[l(T,null,{default:t(()=>[l(W,null,{default:t(()=>e[15]||(e[15]=[o("Delete Share")])),_:1}),l(Y,null,{default:t(()=>e[16]||(e[16]=[o("Are you sure you want to delete this share?")])),_:1}),l(Z,null,{default:t(()=>[l(ae),l(_,{variant:"text",onClick:e[0]||(e[0]=a=>d.value=!1)},{default:t(()=>e[17]||(e[17]=[o("Cancel")])),_:1}),l(_,{color:"error",onClick:E},{default:t(()=>e[18]||(e[18]=[o("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(h,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=a=>y.value=a),timeout:2e3,color:"success"},{default:t(()=>e[19]||(e[19]=[o(" Link copied to clipboard ")])),_:1},8,["modelValue"]),l(_,{color:"primary",icon:"mdi-plus",size:"large",position:"fixed",location:"bottom right",class:"mb-16 mr-4",onClick:F})]),_:1})}}},qe=B(ye,[["__scopeId","data-v-f06e3783"]]);export{qe as default};
